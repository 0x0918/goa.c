# 红黑树

红黑树是一颗近似平衡的二叉查找树，从 `2-3` 树或 `2-3-4` 树衍生而来。通过对二叉树节点进行染色，染色为红或黑节点，来模仿 `2-3` 树或 `2-3-4` 树的3节点和4节点，从而实现了二叉平衡树。

`2-3-4` 树对照实现的红黑树是普通的红黑树，而 `2-3` 树对照实现的红黑树是一种变种，称为左倾红黑树。

我们先介绍 `2-3` 树，再用二叉树形式来实现 `2-3` 树，也就是左倾红黑树，最后介绍 `2-3-4` 树并实现普通的红黑树。

## 一、`2-3` 树

### 1.1. `2-3` 树介绍

`2-3` 树是一棵严格自平衡的多路查找树，由1986年图灵奖得主，美国理论计算机科学家 `John Edward Hopcroft` 在1970年发明，又称 `3阶的B树` (注：`B` 为 `Balance` 平衡的意思) 

它不是一棵二叉树，是一颗介于二叉树和三叉树之间的树。具有以下特征：

1. 内部节点要么有1个数据元素和2个孩子，要么有2个数据元素和3个孩子，而叶子节点没有孩子，但有1或2个数据元素。
2. 所有叶子节点到根节点的长度一致。这个特征保证了完全平衡，非常完美的平衡。
3. 每个节点的数据元素保持从小到大排序，两个数据元素之间的子树的所有值大小介于两个数据元素之间。

如图：

![](../../picture/2_3_tree.png)

如果一个内部节点拥有一个数据元素、两个子节点，则此节点为2节点。
如果一个内部节点拥有两个数据元素、三个子节点，则此节点为3节点。

可以说，所有平衡树的核心都在于插入和删除逻辑，我们主要分析这两个操作。

### 1.2. `2-3` 树插入元素

在插入元素时，需要先找到插入的位置，类似二叉查找树，使用二分查找从上自下查找树节点。

找到插入位置时，将元素插入该位置，然后进行调整，使得满足 `2-3` 树的特征。主要有三种情况：

1. 插入元素到一个2节点，直接插入即可，这样节点变成3节点。
2. 插入元素到一个3节点，该3节点的父亲是一个2节点，先将节点变成临时的4节点，然后向上调整一次。
2. 插入元素到一个3节点，该3节点的父亲是一个3节点，先将节点变成临时的4节点，然后向上调整，此时父亲变为4节点，继续向上调整。

如图（来自维基百科）：

![](../../picture/2-3_insertion.png)

核心在于插入3节点后，该节点变为临时4节点，然后进行分裂恢复树的特征。最坏情况为插入节点后，每一次分裂后都导致上一层变为临时4节点，直到树根节点，这样需要不断向上分裂。

### 1.3. `2-3` 树删除元素


## 二、 左倾红黑树

某些教程不区分普通红黑树和左倾红黑树的区别，直接将左倾红黑树拿来教学，并且称其为红黑树，因为左倾红黑树与普通的红黑树相比，实现起来较为简单，容易教学。在这里，我们区分开左倾红黑树和普通红黑树。

### 2.1. 左倾红黑树介绍

左倾红黑树可以由 `2-3` 树的二叉树形式来实现。其定义为：

1.
2.
3.



### 2.2. 添加元素实现


### 2.2. 删除元素实现

### 2.3. 其他操作实现

### 2.4. 完整程序

## 三、 `2-3-4` 树

### 3.1. `2-3-4` 树介绍

### 3.2. `2-3-4` 树插入元素

### 3.3. `2-3-4` 树删除元素

## 四、 普通红黑树

### 4.1. 普通红黑树介绍

### 4.2. 添加元素实现

### 4.2. 删除元素实现

### 4.3. 其他操作实现

### 4.4. 完整程序

## 五、 AVL树和红黑树的比较
